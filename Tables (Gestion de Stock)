Tables (Gestion de Stock);

/*Table structure for table `branches` */

DROP TABLE IF EXISTS `branches`;

CREATE TABLE `branches` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameb` varchar(50) NOT NULL,
  `phone` varchar(20) NOT NULL,
  `location_id` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `branch_location_fk` (`location_id`),
  CONSTRAINT `branch_location_fk` FOREIGN KEY (`location_id`) REFERENCES `locations` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;


/*Table structure for table `categorie` */

DROP TABLE IF EXISTS `categorie`;

CREATE TABLE `categorie` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `namec` varchar(50) NOT NULL,
  `des` varchar(120) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `cities` */

DROP TABLE IF EXISTS `cities`;

CREATE TABLE `cities` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `namecit` varchar(20) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`namecit`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;


/*Table structure for table `department` */

DROP TABLE IF EXISTS `department`;

CREATE TABLE `department` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `namedep` varchar(50) NOT NULL,
  `phone` varchar(20) NOT NULL,
  `branchid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `department_branch_fk` (`branchid`),
  CONSTRAINT `department_branch_fk` FOREIGN KEY (`branchid`) REFERENCES `branches` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `driving` */

DROP TABLE IF EXISTS `driving`;

CREATE TABLE `driving` (
  `vehicleid` int(10) NOT NULL,
  `employeeid` int(10) NOT NULL,
  `drivdate` datetime NOT NULL,
  `drivdesc` varchar(120) DEFAULT NULL,
  PRIMARY KEY (`vehicleid`,`employeeid`,`drivdate`),
  KEY `driving_employee_fk` (`employeeid`),
  CONSTRAINT `driving_employee_fk` FOREIGN KEY (`employeeid`) REFERENCES `employee` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `driving_vehicle_fk` FOREIGN KEY (`vehicleid`) REFERENCES `vehicle` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `employee` */

DROP TABLE IF EXISTS `employee`;

CREATE TABLE `employee` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameemp` varchar(50) NOT NULL,
  `adress` varchar(80) NOT NULL,
  `phone` int(20) NOT NULL,
  `email` varchar(20) NOT NULL,
  `roomid` int(10) DEFAULT NULL,
  `employeetypeid` int(10) DEFAULT NULL,
  `branchid` int(10) DEFAULT NULL,
  `departmentid` int(10) DEFAULT NULL,
  `stockid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `employee_room_fk` (`roomid`),
  KEY `employee_employeetype_fk` (`employeetypeid`),
  KEY `employee_branch_fk` (`branchid`),
  KEY `employee_department_fk` (`departmentid`),
  KEY `employee_stock_fk` (`stockid`),
  CONSTRAINT `employee_branch_fk` FOREIGN KEY (`branchid`) REFERENCES `branches` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `employee_department_fk` FOREIGN KEY (`departmentid`) REFERENCES `department` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `employee_employeetype_fk` FOREIGN KEY (`employeetypeid`) REFERENCES `employeetype` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `employee_room_fk` FOREIGN KEY (`roomid`) REFERENCES `room` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `employee_stock_fk` FOREIGN KEY (`stockid`) REFERENCES `stock` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `employeetype` */

DROP TABLE IF EXISTS `employeetype`;

CREATE TABLE `employeetype` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nametype` varchar(50) NOT NULL,
  `desctype` varchar(120) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `invoice` */

DROP TABLE IF EXISTS `invoice`;

CREATE TABLE `invoice` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameinv` varchar(50) NOT NULL,
  `dateinv` datetime NOT NULL,
  `disc` int(4) NOT NULL,
  `stockid` int(10) DEFAULT NULL,
  `supplierid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `invoice_stock_fk` (`stockid`),
  KEY `invoice_supplier_fk` (`supplierid`),
  CONSTRAINT `invoice_stock_fk` FOREIGN KEY (`stockid`) REFERENCES `stock` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `invoice_supplier_fk` FOREIGN KEY (`supplierid`) REFERENCES `supplier` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `invoiceproduct` */

DROP TABLE IF EXISTS `invoiceproduct`;

CREATE TABLE `invoiceproduct` (
  `productid` int(10) NOT NULL,
  `invoiceid` int(10) NOT NULL,
  `invproddate` datetime NOT NULL,
  `priceunite` decimal(10,2) DEFAULT NULL,
  `qt` decimal(5,0) DEFAULT NULL,
  `disc` decimal(2,2) DEFAULT NULL,
  PRIMARY KEY (`productid`,`invoiceid`,`invproddate`),
  KEY `invprod_ivoice_fk` (`invoiceid`),
  CONSTRAINT `invprod_ivoice_fk` FOREIGN KEY (`invoiceid`) REFERENCES `invoice` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `invprod_product_fk` FOREIGN KEY (`productid`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `locations` */

DROP TABLE IF EXISTS `locations`;

CREATE TABLE `locations` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameloc` varchar(20) NOT NULL,
  `cityid` int(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `location_city_fk` (`cityid`),
  CONSTRAINT `location_city_fk` FOREIGN KEY (`cityid`) REFERENCES `cities` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;


/*Table structure for table `product` */

DROP TABLE IF EXISTS `product`;

CREATE TABLE `product` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameprod` varchar(50) NOT NULL,
  `categorieid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `product_categorie_fk` (`categorieid`),
  CONSTRAINT `product_categorie_fk` FOREIGN KEY (`categorieid`) REFERENCES `categorie` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `productroom` */

DROP TABLE IF EXISTS `productroom`;

CREATE TABLE `productroom` (
  `productid` int(10) NOT NULL,
  `roomid` int(10) NOT NULL,
  `productroomdate` datetime NOT NULL,
  `qt` decimal(5,0) DEFAULT NULL,
  PRIMARY KEY (`productid`,`roomid`,`productroomdate`),
  KEY `prodroom_room_fk` (`roomid`),
  CONSTRAINT `prodroom_product_fk` FOREIGN KEY (`productid`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `prodroom_room_fk` FOREIGN KEY (`roomid`) REFERENCES `room` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


/*Table structure for table `productsupplier` */

DROP TABLE IF EXISTS `productsupplier`;

CREATE TABLE `productsupplier` (
  `prodid` int(10) NOT NULL,
  `suppid` int(10) NOT NULL,
  `prodsuppdate` datetime NOT NULL,
  `price` decimal(10,2) NOT NULL,
  PRIMARY KEY (`prodid`,`suppid`,`prodsuppdate`),
  KEY `prodsupp_supplier_fk` (`suppid`),
  CONSTRAINT `prodsupp_product_fk` FOREIGN KEY (`prodid`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `prodsupp_supplier_fk` FOREIGN KEY (`suppid`) REFERENCES `supplier` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `room` */

DROP TABLE IF EXISTS `room`;

CREATE TABLE `room` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameroom` varchar(50) NOT NULL,
  `phone` int(20) NOT NULL,
  `departmentid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `Room_department_fk` (`departmentid`),
  CONSTRAINT `Room_department_fk` FOREIGN KEY (`departmentid`) REFERENCES `department` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `stock` */

DROP TABLE IF EXISTS `stock`;

CREATE TABLE `stock` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `namestck` varchar(50) NOT NULL,
  `phone` int(20) NOT NULL,
  `branchid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `stock_Branch_fk` (`branchid`),
  CONSTRAINT `stock_Branch_fk` FOREIGN KEY (`branchid`) REFERENCES `branches` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `stockproduct` */

DROP TABLE IF EXISTS `stockproduct`;

CREATE TABLE `stockproduct` (
  `stockid` int(10) NOT NULL,
  `productid` int(10) NOT NULL,
  `stockproductdate` datetime NOT NULL,
  `qt` decimal(5,0) DEFAULT NULL,
  `flagminqt` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`stockid`,`productid`,`stockproductdate`),
  KEY `stockprod_product_fk` (`productid`),
  CONSTRAINT `stockprod_product_fk` FOREIGN KEY (`productid`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `stockprod_stock_fk` FOREIGN KEY (`stockid`) REFERENCES `stock` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `supplier` */

DROP TABLE IF EXISTS `supplier`;

CREATE TABLE `supplier` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `namesup` varchar(50) NOT NULL,
  `phone` int(20) NOT NULL,
  `adress` varchar(80) NOT NULL,
  `email` varchar(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `transfer` */

DROP TABLE IF EXISTS `transfer`;

CREATE TABLE `transfer` (
  `stockid` int(10) NOT NULL,
  `vehicleid` int(10) NOT NULL,
  `productid` int(10) NOT NULL,
  `transferdate` datetime NOT NULL,
  `qt` int(10) NOT NULL,
  PRIMARY KEY (`stockid`,`vehicleid`,`productid`,`transferdate`),
  KEY `transfer_vehicle_fk` (`vehicleid`),
  KEY `transfer_product_fk` (`productid`),
  CONSTRAINT `transfer_product_fk` FOREIGN KEY (`productid`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `transfer_stock-fk` FOREIGN KEY (`stockid`) REFERENCES `stock` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `transfer_vehicle_fk` FOREIGN KEY (`vehicleid`) REFERENCES `vehicle` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `users` */

DROP TABLE IF EXISTS `users`;

CREATE TABLE `users` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL,
  `userpass` varchar(20) NOT NULL,
  `valid` varchar(1) NOT NULL,
  `employeeid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`,`username`),
  KEY `user_employee_fk` (`employeeid`),
  CONSTRAINT `user_employee_fk` FOREIGN KEY (`employeeid`) REFERENCES `employee` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



/*Table structure for table `vehicle` */

DROP TABLE IF EXISTS `vehicle`;

CREATE TABLE `vehicle` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `nameveh` varchar(50) NOT NULL,
  `stockid` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `vehicl_stock_fk` (`stockid`),
  CONSTRAINT `vehicl_stock_fk` FOREIGN KEY (`stockid`) REFERENCES `stock` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
